<%= render HeaderBarComponent.new(title: "Shopping List Analytics") do |c| %>
  <%# c.with_breadcrumb_collection([
    { label: "Admin", path: admin_users_path },
    { label: "Analytics", path: nil },
    { label: "Shopping Lists", path: nil }
  ]) %>
  <%# c.with_icon_link_collection([
    { icon: "user-circle", path: admin_analytics_user_preferences_path, label: "User Preferences", scheme: :secondary }
  ]) %>
<% end %>

<%= render ContainerComponent.new do %>
  <%# Timeline Charts %>
  <%= render SectionCardComponent.new(title: "Shopping Activity Over Time") do %>
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
      <div>
        <%= line_chart @facade.shopping_lists_over_time,
            title: "Shopping Lists Created",
            xtitle: "Date",
            ytitle: "Number of Lists",
            height: "300px",
            colors: ["#3b82f6"] %>
      </div>
      <div>
        <%= area_chart @facade.items_added_over_time,
            title: "Items Added to Lists",
            xtitle: "Date",
            ytitle: "Number of Items",
            height: "300px",
            colors: ["#22c55e"] %>
      </div>
    </div>
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div>
        <%= area_chart @facade.archived_items_over_time,
            title: "Items Archived (Completed)",
            xtitle: "Date",
            ytitle: "Number of Items",
            height: "300px",
            colors: ["#a855f7"] %>
      </div>
      <div>
        <%= column_chart @facade.archive_rate_by_day_of_week,
            title: "Archive Rate by Day of Week",
            xtitle: "Day",
            ytitle: "Items Archived",
            height: "300px",
            colors: ["#f59e0b"] %>
      </div>
    </div>
  <% end %>

  <%# Distribution Charts %>
  <%= render SectionCardComponent.new(title: "Shopping List Patterns") do %>
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div>
        <%= column_chart @facade.items_per_list_distribution,
            title: "Items Per List Distribution",
            xtitle: "List Size",
            ytitle: "Number of Lists",
            height: "300px",
            colors: ["#06b6d4"] %>
      </div>
      <div>
        <%= pie_chart @facade.active_vs_archived_items,
            title: "Active vs Archived Items",
            donut: true,
            height: "300px",
            colors: ["#22c55e", "#94a3b8"] %>
      </div>
    </div>
  <% end %>

  <%# Ingredient Charts %>
  <%= render SectionCardComponent.new(title: "Ingredient Insights") do %>
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
      <div>
        <%= bar_chart @facade.top_ingredients,
            title: "Top 20 Most Purchased Ingredients",
            xtitle: "Count",
            ytitle: "Ingredient",
            height: "400px",
            colors: ["#3b82f6"] %>
      </div>
      <div>
        <%= pie_chart @facade.ingredient_category_distribution,
            title: "Ingredient Category Distribution",
            donut: true,
            height: "400px",
            legend: "bottom" %>
      </div>
    </div>
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
      <div>
        <%= column_chart @facade.packaging_form_breakdown,
            title: "Packaging Form Preferences",
            xtitle: "Packaging Form",
            ytitle: "Count",
            height: "300px",
            colors: ["#22c55e", "#3b82f6", "#a855f7", "#f59e0b", "#06b6d4"] %>
      </div>
      <div>
        <%= bar_chart @facade.preparation_style_breakdown,
            title: "Preparation Style Preferences",
            xtitle: "Count",
            ytitle: "Preparation Style",
            height: "300px",
            colors: ["#f59e0b"] %>
      </div>
    </div>
  <% end %>
<% end %>
