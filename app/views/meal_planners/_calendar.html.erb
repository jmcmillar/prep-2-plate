<%= tag.div(id: "list-view") do %>
  <div class="container px-4 pb-6" id="meal-planner">
    <div class="flex justify-between my-4">
      <%= render ButtonLinkComponent.new(button_link_data: facade.previous_week_link_data) %>
      <%= render ButtonLinkComponent.new(button_link_data: facade.next_week_link_data) %>
    </div>
    <% facade.current_week.map do |day| %>
      <div class="bg-white border border-[#EDEADE] shadow-sm rounded-xl p-4 mb-4">
        <div class="flex items-center justify-between">
          <h2 class="text-lg font-semibold text-[#2E2E2E]"><%= day.strftime("%a, %B %d, %Y") %></h2>
          <div class="flex items-center space-x-3">
            <%= render ModalButtonComponent.new(
              button_link_data: ModalButtonComponent::Data[
                nil,
                url_for([:meal_planner, :recipes, {day: day}]),
                :plus,
                :link
              ]
            ) %>
          </div>
        </div>
        <ul class="mt-3 space-y-2 text-sm text-[#2E2E2E]">
          <% (facade.plan[day&.to_s] || {}).fetch("recipes", []).each do |recipe| %>
            <li class="border border-primary  px-3 py-2 rounded flex justify-between items-center shadow-sm bg-[#F4F1DE]/20">
              <span class="font-medium"><%= recipe["name"] %></span>
              <%= button_to render(IconComponent.new(IconComponent::Data[:minus_circle, :fal])), meal_planner_recipe_path(id: recipe["id"], day: day),
                method: :delete,
                data: { turbo_method: :delete },
                class: "text-lg text-secondary hover:underline font-bold" %>
            </li>
          <% end %>
        </ul>
      </div>
    <% end %>
  </div>
<% end %>
